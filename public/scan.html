<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Scan</title>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.10.2/jquery.min.js'></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery.maskedinput/1.3.1/jquery.maskedinput.min.js'> </script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.11.1/jquery.validate.min.js'></script>

  <style type="text/css">
    form { width: 600px; }
    legend { color: blue; }
    label { display: inline-block; width: 10em; text-align: right; padding-right: 5px; }
    input.submit { margin-left: 15em; }
    .error { color: red; }
    span.error { padding-left: 5px; font-size: 90% }
  </style>

</head>
<body>
  <form action="/scanner/start" method="post" id="scanform">
    <fieldset>
      <legend>Scan Report Request</legend>
      <p>
        <label for="bussiness_contat">Business Contact:</label>
        <input type="text" id="bussiness_contact_first_name" name="first_name" placeholder="First Name" />
      </p>
      <p>
        <label for="bussiness_contact"></label>
        <input type="text" id="bussiness_contact_last_name" name="last_name" placeholder="Last Name" />
      </p>
      <p>
        <label for="bussiness_name">Business Name:</label>
        <input type="text" id="bussiness_name" name="name" placeholder="Business name" class="action_input_1"/>
      </p>
      <p>
        <label for="bussiness_number">Business Phone:</label>
        <input type="text" id="bussiness_number" name="phone" placeholder="Business telephone number" class="action_input_1"/>
      </p>
      <p>
        <label for="zip">Zip Code:</label>
        <input type="text" id="zip" name="zip" placeholder="Zip" />
      </p>
      <p>
        <label for="email">Email report to:</label>
        <input type="text" id="email" name="email" placeholder="Email" class="action_input_1"/>
      </p>
      <p>
        <label for"referrer_code">Referral Code:</label>
        <input type="text" id="referrer_code" name="referrer_code" placeholder="Referral Code" class="action_input_1"/>
      </p>
      <input type="hidden" id="package_id" name="package_id" value="1" />
        <input type="submit" class="submit" value="Scan Now" />
        <input type="reset" value="Reset" />
    </fieldset>
  </form>
  <script type="text/javascript">
 jQuery(function($){
   $("#bussiness_number").mask("9999999999");
   $("#zip").mask("99999");
   });

  $("#scanform").validate({
    rules: {
      first_name: "required",
      last_name: "required",
      name: "required",
      phone: "required",
      zip: "required",
      referrer_code: "required",
      email: "email"
      },
      errorElement: "span"
      });

    
    var urlParams;
  (window.onpopstate = function () {
      var match,
          pl = /\+/g, // Regex for replacing addition symbol with a space
          search = /([^&=]+)=?([^&]*)/g,
          decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
          query = window.location.search.substring(1);

      urlParams = {};
      while (match = search.exec(query))
         urlParams[decode(match[1])] = decode(match[2]);
      document.getElementById('package_id').value = urlParams['package_id'];
  })();
  </script>
  
</body>
</html>
